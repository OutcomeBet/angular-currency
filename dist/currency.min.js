"use strict";!function(){var n=angular.module("nn.currency",[]);n.constant("nnCurrencyRate",1),n.constant("nnCurrencySymbol",!1),n.filter("nnCurrency",["nnCurrencyRate","nnCurrencySymbol",function(r,u){return function(n){return angular.isNumber(n)?(n/r).toFixed(2)+(u?" "+u:""):""}}]),n.filter("nnCurrencyNormalize",[function(){return function(n){return angular.isString(n)&&(n=parseFloat(n)),angular.isNumber(n)?n.toFixed(2):""}}]),n.filter("nnCurrencyToCoins",["nnCurrencyRate",function(r){return function(n){return angular.isString(n)&&(n=parseFloat(n)),angular.isNumber(n)?n*r:NaN}}]),n.directive("nnCurrency",["nnCurrencyFilter","nnCurrencyRate",function(a,o){return{require:"?ngModel",link:function(n,r,u,e){var t=!1;r.bind("blur",function(){r.val(a(e.$modelValue)),t=!1}),r.bind("focus",function(){t=!0});var i=e.$isEmpty;e.$isEmpty=function(n){return i(n)},n.$watch(function(){return e.$modelValue},function(n){t||r.val(a(e.$modelValue))}),e.$formatters.push(function(n){return void 0===n?n:parseFloat(a(n))}),e.$parsers.push(function(n){if(null==n)return n;if("number"==typeof n&&(n=n.toString()),""===(n=n.replace(/[^\-0-9.]/g,"")))return null;var r=parseFloat(n);return angular.isNumber(r)?Math.round(r*o):void 0})}}}])}();